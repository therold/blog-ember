<form {{action 'update' post on='submit'}}>
  <div class="form-group">
    <label for="title">Title</label>
    {{input value=title id="title" class="form-control" required="required"}}
  </div>
  <div class="form-group">
    <label for="author">Author</label>
    {{input value=author id="author" class="form-control" required="required"}}
  </div>
  <div class="form-group">
    <label for="body">Message</label>
    {{textarea value=body id="body" class="form-control" rows=8 required="required"}}
  </div>
  <label>Categories</label>
  <div class="form-group">
    <div class="categories input-group">

    {{#if isNewCategoriesShowing}}
      <span class="input-group-btn">
        {{#each post.categories as |category|}}
          {{#if (array-contains removeCategories category.id)}}
            <button {{action 'undoRemoveCategory' category}} class="btn btn-danger">{{category.name}}</button>
          {{else}}
            <button {{action 'removeCategory' category}} class="btn btn-default">{{category.name}}</button>
          {{/if}}
        {{/each}}
      </span>
      {{input value=newCategories id="newCategories" class="form-control"}}
    {{else}}
      <span class="input-group-btn">
        {{#each post.categories as |category|}}
          {{#if (array-contains removeCategories category.id)}}
            <button {{action 'undoRemoveCategory' category}} class="btn btn-danger">{{category.name}}</button>
          {{else}}
            <button {{action 'removeCategory' category}} class="btn btn-default">{{category.name}}</button>
          {{/if}}
        {{/each}}
        <button {{action 'showNewCategories'}} class="btn btn-info">+</button>
      </span>
    {{/if}}

    </div>
  </div>
  <button class="btn btn-warning">Save changes</button>
  <button class="btn btn-default" {{action 'cancelUpdate'}}>Cancel</button>
  <button class="btn btn-danger pull-right" {{action 'delete' post}}>Delete post</button>
</form>
